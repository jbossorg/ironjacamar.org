<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IronJacamar 2 / Common</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="IronJacamar 2 common module" name="description">
    <link href="/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>
    <header>
      <section style="padding: -20px auto;">
        <a href="/">
          <img alt="IronJacamar" src="/images/banner.png">
        </a>
      </section>
    </header>
    <article>
      <h1>IronJacamcar 2 / Common</h1>
      <ul>
        <li>Only support the latest version of the metadata</li>
        <li>Richer model</li>
        <li>Metadata transformers</li>
      </ul>
      <h2>Only support the latest version of the metadata</h2>
      We are only going to support the latest version of metadata models.
      <p></p>
      This means that there will only 1 version that represent the standard metadata model (ra.xml), and
      1 metadata model for the activation metadata.
      <p></p>
      So
      <p></p>
      <ul>
        <li>
          1..1 standard metadata: We will mark w/ a flag the version of parsed XML file. Obtained through
          <ul>
            <li>META-INF/ra.xml</li>
            <li>Connector annotations</li>
          </ul>
          Fields not present in previous version and/or not specified will take defaults.
        </li>
        <li>
          0..n activation metadata: Generated by parsing both ironjacamar.xml and -ra.xml files, having in fact same content
          <ul>
            <li>-ra.xml: Archive name will be obtained from the definition itself</li>
            <li>ironjacamar.xml: Archive name will be defined by the deployer chain</li>
          </ul>
        </li>
      </ul>
      <h2>Richer model</h2>
      We need a richer metadata model, containing not only the value of a field, but also other information, and able to handle standard operations.
      <p></p>
      Requirements:
      <p></p>
      <ul>
        <li>Extend an Attribute<? extends Object> generic class</li>
        <li>'Name' containing the name of the attribute or element</li>
        <li>'Value' is immutable</li>
        <li>'Value' is always an Object subtype (String, Integer, Float....) and not a primitive type (int, float...)</li>
        <li>'Value' must have a default</li>
        <li>'Value' with "null" means container default</li>
        <li>'Mandatory' defines if the attribute or element is mandatory</li>
        <li>Have an optional validator handler. We will have standard implementations (IntegerValidator, StringValidator, IntegerRangeValidator and so on), but of course a specific implementation can be specified for integration</li>
        <li>Have an optional error handler to permit better integration. Default implementation is just logging and rethrow exception, most likely incapsulated in our own exception</li>
      </ul>
      <p></p>
      Parser requirements:
      <p></p>
      <ul>
        <li>Implement the XML parser SPI</li>
        <li>ParserFactory based on service activation, e.g. available parsers resolved at runtime</li>
        <li>Have a StAX based implementation for IronJacamar/Standalone and IronJacamar/Embedded</li>
      </ul>
      <p></p>
      The names of the attributes and elements must be centrally defined. A decorator pattern could be used in the parsing phase.
      <h2>Metadata transformers</h2>
      There must be transformers for older versions of the ironjacmar.xml and -ra.xml activation models.
      <p></p>
      The transformer could be attached to the individual metadata model node. Ignore and reject cases must be handled.
      <br>
      <br>
    </article>
    <footer>
      <ul>
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/about.html">About</a>
        </li>
        <li>
          <a href="/download.html">Download</a>
        </li>
        <li>
          <a href="/documentation.html">Documentation</a>
        </li>
        <li>
          <a href="/community.html">Community</a>
        </li>
        <li>
          <a href="/sourcecode.html">Source Code</a>
        </li>
        <li>
          <a href="/issues.html">Issues</a>
        </li>
      </ul>
      <a href="http://www.redhat.com">
        <img alt="Proudly sponsored by Red Hat" src="/images/redhat_logo.png">
      </a>
    </footer>
  </body>
</html>
