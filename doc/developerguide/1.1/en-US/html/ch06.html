<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 6. Metadata</title><link rel="stylesheet" type="text/css" href="css/ironjacamar.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/><link rel="home" href="index.html" title="IronJacamar 1.1 Developer's Guide"/><link rel="up" href="index.html" title="IronJacamar 1.1 Developer's Guide"/><link rel="prev" href="ch05.html" title="Chapter 5. Testing"/><link rel="next" href="ch07.html" title="Chapter 7. Deployers"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><p xmlns:d="http://docbook.org/ns/docbook" id="title"><a href="http://www.ironjacamar.org/" class="site_href"><strong>www.ironjacamar.org</strong></a><a href="http://www.ironjacamar.org/documentation.html" class="doc_href"><strong>Community Documentation</strong></a></p><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="ch05.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="ch07.html"><strong>Next</strong></a></li></ul><div class="chapter" title="Chapter 6. Metadata"><div class="titlepage"><div><div><h2 class="title"><a id="metadata"/>Chapter 6. Metadata</h2></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="section"><a href="ch06.html#coremetadata">6.1. Core Metadata</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#jcametadata">6.1.1. Java Connector Architecture Metadata</a></span></dt><dt><span class="section"><a href="ch06.html#ironjacamarmetadata">6.1.2. IronJacamar Metadata</a></span></dt><dt><span class="section"><a href="ch06.html#resourceadapterdeploymentmetadata">6.1.3. Resource adapter deployment Metadata</a></span></dt><dt><span class="section"><a href="ch06.html#datasourcedeploymentmetadata">6.1.4. Datasource deployment Metadata</a></span></dt></dl></dd><dt><span class="section"><a href="ch06.html#metadatarepository">6.2. Metadata Repository</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#mdrinterface">6.2.1. Interface</a></span></dt><dt><span class="section"><a href="ch06.html#mdrbean">6.2.2. Bean</a></span></dt></dl></dd></dl></div><div class="section" title="6.1. Core Metadata"><div class="titlepage"><div><div><h2 class="title"><a id="coremetadata"/>6.1. Core Metadata</h2></div></div></div><p>The metadata for the IronJacamar project is split up into the following areas</p><div class="itemizedlist"><ul class="itemizedlist" compact="compact"><li class="listitem"><p>Java Connector Architecture Metadata</p></li><li class="listitem"><p>IronJacamar Metadata</p></li><li class="listitem"><p>Resource adapter deployment Metadata</p></li><li class="listitem"><p>DataSource deployment Metadata</p></li></ul></div><p>All metadata parsing is done using the StAX model (<code class="code">javax.xml.stream</code>) for
      optimal performance.</p><p>The implementation of these areas is done within the common module of the project.</p><div class="section" title="6.1.1. Java Connector Architecture Metadata"><div class="titlepage"><div><div><h3 class="title"><a id="jcametadata"/>6.1.1. Java Connector Architecture Metadata</h3></div></div></div><p>The Java Connector Architecture (JCA) metadata implement the metadata defined in the JCA specifications.
        We have metadata representing the following standards:</p><div class="itemizedlist"><ul class="itemizedlist" compact="compact"><li class="listitem"><p>Java Connector Architecture 1.0</p></li><li class="listitem"><p>Java Connector Architecture 1.5</p></li><li class="listitem"><p>Java Connector Architecture 1.6</p></li></ul></div><p>An instance of the metadata is bundle with the resource adapter archive as</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
META-INF/ra.xml
      </pre><p>The implementation is split into two package hierarchies - the API in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.api.metadata.ra
      </pre><p>and the implementation in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.metadata.ra
      </pre><p>.</p></div><div class="section" title="6.1.2. IronJacamar Metadata"><div class="titlepage"><div><div><h3 class="title"><a id="ironjacamarmetadata"/>6.1.2. IronJacamar Metadata</h3></div></div></div><p>The IronJacamar metadata can provide overrides for the values specified in the
        standard Java Connector Architecture metdata. It is also possible to specify
        deployment metadata, which will active an instance of the resource adapter without
        any other deployment plans.</p><p>Supported versions of the metadata:</p><div class="itemizedlist"><ul class="itemizedlist" compact="compact"><li class="listitem"><p>IronJacamar 1.0</p></li></ul></div><p>An instance of the metadata is bundle with the resource adapter archive as</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
META-INF/ironjacamar.xml
      </pre><p>The implementation is split into two package hierarchies - the API in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.api.metadata.ironjacamar
      </pre><p>and the implementation in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.metadata.ironjacamar
      </pre><p>.</p></div><div class="section" title="6.1.3. Resource adapter deployment Metadata"><div class="titlepage"><div><div><h3 class="title"><a id="resourceadapterdeploymentmetadata"/>6.1.3. Resource adapter deployment Metadata</h3></div></div></div><p>The resource adapter deployment metadata provides a deployment plan for
        the specified resource adapter archive. It is possible to override
        metadata specified as part of the Java Connector Architecture metadata or 
        the IronJacamar metadata.</p><p>Supported versions of the metadata:</p><div class="itemizedlist"><ul class="itemizedlist" compact="compact"><li class="listitem"><p>Resource adapter deployment 1.0</p></li></ul></div><p>The implementation is split into two package hierarchies - the API in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.api.metadata.resourceadapters
      </pre><p>and the implementation in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.metadata.resourceadapters
      </pre><p>.</p></div><div class="section" title="6.1.4. Datasource deployment Metadata"><div class="titlepage"><div><div><h3 class="title"><a id="datasourcedeploymentmetadata"/>6.1.4. Datasource deployment Metadata</h3></div></div></div><p>The datasource deployment metadata provides a deployment plan for
        datasources. The metadata allows the developer to setup connection parameters, pooling
        settings and security.</p><p>Supported versions of the metadata:</p><div class="itemizedlist"><ul class="itemizedlist" compact="compact"><li class="listitem"><p>Datasource deployment 1.0</p></li></ul></div><p>The implementation is split into two package hierarchies - the API in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.api.metadata.ds
      </pre><p>and the implementation in</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.common.metadata.ds
      </pre><p>.</p><div class="section" title="6.1.4.1. Datasource mapping"><div class="titlepage"><div><div><h4 class="title"><a id="datasourcedeploymentmetadatamapping"/>6.1.4.1. Datasource mapping</h4></div></div></div><p>The table below specifies how each attribute/element map to the resource adapter
          or the container.</p><div class="table"><a id="d0e1384"/><p class="title"><strong>Table 6.1. Datasource mapping</strong></p><div class="table-contents"><table summary="Datasource mapping" border="1"><colgroup><col align="left" class="c1"/><col align="left" class="c2"/><col align="left" class="c3"/></colgroup><thead><tr><th align="left">Tag</th><th align="left">Resource Adapter</th><th align="left">Container</th></tr></thead><tbody><tr><td align="left"><code class="code">min-pool-size</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">max-pool-size</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">prefill</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">user-name</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">password</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">connection-url</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">driver-class</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">transaction-isolation</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">connection-property</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">url-delimiter</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">url-selector-strategy-class-name</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">new-connection-sql</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">xa-datasource-property</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">xa-datasource-class</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">is-same-rm-override</code></td><td align="left"> </td><td align="left"><code class="code">TxConnectionManager</code></td></tr><tr><td align="left"><code class="code">interleaving</code></td><td align="left"> </td><td align="left"><code class="code">TxConnectionManager</code></td></tr><tr><td align="left"><code class="code">prepared-statement-cache-size</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">share-prepared-statements</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">pad-xid</code></td><td align="left"> </td><td align="left"><code class="code">TxConnectionManager</code></td></tr><tr><td align="left"><code class="code">wrap-xa-resource</code></td><td align="left"> </td><td align="left"><code class="code">TxConnectionManager</code></td></tr><tr><td align="left"><code class="code">no-tx-separate-pools</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">jndi-name</code></td><td align="left"> </td><td align="left"><code class="code">ConnectionManager</code></td></tr><tr><td align="left"><code class="code">pool-name</code></td><td align="left"> </td><td align="left">X</td></tr><tr><td align="left"><code class="code">enabled</code></td><td align="left"> </td><td align="left">X</td></tr><tr><td align="left"><code class="code">use-java-context</code></td><td align="left"> </td><td align="left">X</td></tr><tr><td align="left"><code class="code">valid-connection-checker-class-name</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">check-valid-connection-sql</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">validate-on-match</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">background-validation</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">background-validation-minutes</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">use-fast-fail</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">stale-connection-checker-class-name</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">exception-sorter-class-name</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">blocking-timeout-millis</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">idle-timeout-minutes</code></td><td align="left"> </td><td align="left"><code class="code">Pool</code></td></tr><tr><td align="left"><code class="code">set-tx-query-timeout</code></td><td align="left"> </td><td align="left"> </td></tr><tr><td align="left"><code class="code">query-timeout</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">use-try-lock</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">allocation-retry</code></td><td align="left"> </td><td align="left"><code class="code">ConnectionManager</code></td></tr><tr><td align="left"><code class="code">allocation-retry-wait-millis</code></td><td align="left"> </td><td align="left"><code class="code">ConnectionManager</code></td></tr><tr><td align="left"><code class="code">xa-resource-timeout</code></td><td align="left"> </td><td align="left"><code class="code">TxConnectionManager</code></td></tr><tr><td align="left"><code class="code">track-statements</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">prepared-statement-cache-size</code></td><td align="left">X</td><td align="left"> </td></tr><tr><td align="left"><code class="code">share-prepared-statements</code></td><td align="left">X</td><td align="left"> </td></tr></tbody></table></div></div><br class="table-break"/></div></div></div><div class="section" title="6.2. Metadata Repository"><div class="titlepage"><div><div><h2 class="title"><a id="metadatarepository"/>6.2. Metadata Repository</h2></div></div></div><p>The metadata repository serves as a central point for all the metadata in the systems.</p><div class="section" title="6.2.1. Interface"><div class="titlepage"><div><div><h3 class="title"><a id="mdrinterface"/>6.2.1. Interface</h3></div></div></div><p>The interface of the metadata repository is located in:</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="">
org.jboss.jca.core.spi.MetaDataRepository
      </pre><p>providing methods to query and update the repository.</p></div><div class="section" title="6.2.2. Bean"><div class="titlepage"><div><div><h3 class="title"><a id="mdrbean"/>6.2.2. Bean</h3></div></div></div><p>The implementation of the metadata repository can be defined as:</p><pre xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">bean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MetaDataRepository&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">interface</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.jca.core.spi.MetaDataRepository&quot;</span><span class="xml_plain">&nbsp;</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.jboss.jca.core.mdr.SimpleMetaDataRepository&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">bean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
</pre><p>which is a simple implementation of the metadata repository service provider interface (SPI).</p></div></div></div><hr xmlns="" xmlns:d="http://docbook.org/ns/docbook"/><a xmlns="" xmlns:d="http://docbook.org/ns/docbook" href="legalnotice.html"/><ul xmlns:d="http://docbook.org/ns/docbook" class="docnav"><li class="previous"><a accesskey="p" href="ch05.html"><strong>Prev</strong>Chapter 5. Testing</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="ch07.html"><strong>Next</strong>Chapter 7. Deployers</a></li></ul></body></html>